<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Flipper Zero Firmware: Furi HAL Debugging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Flipper Zero Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Furi HAL Debugging </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Some Furi subsystem got additional debugging features that can be enabled by adding additional defines to firmware compilation. Usually they are used for low level tracing and profiling or signal redirection/duplication.</p>
<h1><a class="anchor" id="autotoc_md143"></a>
FuriHalOs</h1>
<p ><code>--extra-define=FURI_HAL_OS_DEBUG</code> enables tick, tick suppression, idle and time flow.</p>
<p >There are 3 signals that will be exposed to external GPIO pins:</p>
<ul>
<li><code>AWAKE</code> - <code>PA7</code> - High when system is busy with computations, low when sleeping. Can be used to track transitions to sleep mode.</li>
<li><code>TICK</code> - <code>PA6</code> - Flipped on system tick, only flips when no tick suppression in progress. Can be used to track tick skew and abnormal task scheduling.</li>
<li><code>SECOND</code> - <code>PA4</code> - Flipped each second. Can be used for tracing RT issue: time flow disturbance means system doesn't conforms Hard RT.</li>
</ul>
<h1><a class="anchor" id="autotoc_md144"></a>
FuriHalPower</h1>
<p ><code>--extra-define=FURI_HAL_POWER_DEBUG</code> enables power subsystem mode transitions tracing.</p>
<p >There are 2 signals that will be exposed to external GPIO pins:</p>
<ul>
<li><code>WFI</code> - <code>PB2</code> - Light sleep (wait for interrupt) used. Basically this is lightest and most non-breaking things power save mode. All function and debug should work correctly in this mode.</li>
<li><code>STOP</code> - <code>PC3</code> - STOP mode used. Platform deep sleep mode. Extremely fragile mode where most of the silicon is disabled or in unusable state. Debugging MCU in this mode is nearly impossible. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
